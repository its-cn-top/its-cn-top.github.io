
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>消息通知</title>
</head>
<body><h2>消息通知</h2>
<script>
    window.onload = function () {
        suportNotify()
    }

    //判断浏览器是否支持Web Notifications API
    function suportNotify(){
        if (window.Notification) {
            // 支持
            console.log("支持"+"Web Notifications API");
            //如果支持Web Notifications API，再判断浏览器是否支持弹出实例
            showMess()
        } else {
            // 不支持
            alert("不支持 Web Notifications API");
        }
    }

    //判断浏览器是否支持弹出实例
    function showMess(){
        setTimeout(function () {
            console.log('1：'+Notification.permission);
            //如果支持window.Notification 并且 许可不是拒绝状态
            if(window.Notification && Notification.permission !== "denied") {
                //Notification.requestPermission这是一个静态方法，作用就是让浏览器出现是否允许通知的提示
                Notification.requestPermission(function(status) {
                    console.log('2: '+status);
                    //如果状态是同意
                    if (status === "granted") {
                        var m = new Notification('紧急通知', {
                            body: '以下是目前我们持续运营的网址：https://trytoget.gitee.io/lite-new-page/index.html ； http://np.zymail.ga ； http://zymail.ga .如果你使用过或正在使用不在清单内的域名，请立即核对并通过支持论坛进行反馈!我们开源仅供大家学习使用，使用 Apache License 2.0 进行开源.感谢各位长久以来的支持',　　//消息体内容
                            icon:"https://i.loli.net/2020/05/13/uZSwoaRM4v5dLmf.png"　　//消息图片
                        });
                        m.onclick = function () {//点击当前消息提示框后，跳转到当前页面
                            myWindow=window.open('','','width=750,height=750');
	myWindow.document.write("<p><center>以下是目前我们持续运营的网址<br> <br> https://trytoget.gitee.io/lite-new-page/ <br> http://np.zymail.ga <br> http://zymail.ga <br>  <br> 如果你使用过或正在使反用不在清单内的域名，请立即核对并通过<a href='https://support.qq.com/products/153198?'>支持论坛</a>进行反馈! <br>  <br> 我们开源仅供大家学习使用，使用 Apache License 2.0 进行开源. <br>  <br> 感谢各位长久以来的支持</center></p>");
	myWindow.focus();
                        }
                    } else{
                        alert('当前浏览器不支持弹出消息')
                    }
                });
            }
        },1000)
    }
</script>
</body>
</html>